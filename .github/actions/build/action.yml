name: build

runs:
  using: composite

  steps:
    - name: setup envs
      run: cp src/app/.env.ci src/app/.env
      shell: bash
    
    - name: print env
      run: cat src/app/.env
      shell: bash

    - name: setup python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ env.PYTHON_VERSION }}

    - name: setup poetry
      uses: snok/install-poetry@v1
      with:
        virtualenvs-create: false

    - name: deps
      run: poetry install --no-interaction --no-root
      shell: bash
